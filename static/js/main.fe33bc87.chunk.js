(this["webpackJsonpreact-user-directory"]=this["webpackJsonpreact-user-directory"]||[]).push([[0],{1:function(t,e,a){t.exports={notice:"UserCard_notice__gdGw4",container:"UserCard_container__KjLn0",card__container:"UserCard_card__container__10T6l",card__desc:"UserCard_card__desc__2yz51",card__item:"UserCard_card__item__1pg_h",card__email:"UserCard_card__email__4MCfG",bg__red:"UserCard_bg__red__37Uay",bg__green:"UserCard_bg__green__1sCSd",bg__blue:"UserCard_bg__blue__2qDC7"}},20:function(t,e,a){t.exports={wrapper:"Wrapper_wrapper__2gcWR"}},22:function(t,e,a){t.exports={loading__skeleton:"LoadingSkeleton_loading__skeleton__a6FN5",pulse:"LoadingSkeleton_pulse__3mlRe"}},23:function(t,e,a){t.exports=a(46)},45:function(t,e,a){},46:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),o=a(19),i=a.n(o),s=a(3),l=a(4),c=a(6),d=a(5),u=a(20),h=a.n(u),C=function(t){return r.a.createElement("main",{className:"".concat(h.a.wrapper)},t.children)},m=a(7),g=a.n(m),_=function(t){Object(c.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).componentDidMount=function(){var t=localStorage.getItem("colorState"),e="true"===t,a="true"===localStorage.getItem("cityState");null!==t&&n.setState({btnColorState:e,btnCitiesState:a},(function(){this.props.filterColorState(this.state.btnColorState),this.props.filterCitiesState(this.state.btnCitiesState)}))},n.handleBtnColorClick=function(){n.setState({btnColorState:(n.state.btnColorState,!n.state.btnColorState),btnCitiesState:n.state.btnCitiesState?!n.state.btnCitiesState:n.state.btnCitiesState},(function(){this.props.filterColorState(this.state.btnColorState),this.props.filterCitiesState(this.state.btnCitiesState),localStorage.setItem("colorState",this.state.btnColorState),localStorage.setItem("cityState",this.state.btnCitiesState)}))},n.handleBtnCitiesClick=function(){n.setState({btnColorState:n.state.btnColorState?!n.state.btnColorState:n.state.btnColorState,btnCitiesState:(n.state.btnCitiesState,!n.state.btnCitiesState)},(function(){this.props.filterColorState(this.state.btnColorState),this.props.filterCitiesState(this.state.btnCitiesState),localStorage.setItem("colorState",this.state.btnColorState),localStorage.setItem("cityState",this.state.btnCitiesState)}))},n.state={btnColorState:!1,btnCitiesState:!1},n}return Object(l.a)(a,[{key:"render",value:function(){var t=this.state.btnColorState?"".concat(g.a.navigation__item," ").concat(g.a.navigation__item_active):"".concat(g.a.navigation__item),e=this.state.btnCitiesState?"".concat(g.a.navigation__item," ").concat(g.a.navigation__item_active):"".concat(g.a.navigation__item);return r.a.createElement("div",{className:"".concat(g.a.navigation__container)},r.a.createElement("h5",null,"Filter By:"),r.a.createElement("div",{id:"btnFilterColor",className:t,onClick:this.handleBtnColorClick},r.a.createElement("span",null,"Color")),r.a.createElement("div",{id:"btnFilterCity",className:e,onClick:this.handleBtnCitiesClick},r.a.createElement("span",null,"City")))}}]),a}(n.Component),S=function(t){Object(c.a)(a,t);var e=Object(d.a)(a);function a(){return Object(s.a)(this,a),e.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,"User Directory"),r.a.createElement("div",null,r.a.createElement(_,{filterColorState:this.props.filterColorState,filterCitiesState:this.props.filterCitiesState})))}}]),a}(n.Component),f=a(8),b=a(9),p=a(21),D=a.n(p),y=function(t,e){var a=Array.from({length:e},(function(t){return[]}));return t.forEach((function(t,e){return a[e%a.length].push(t)})),a},v=function(t){var e=t.filter((function(t){return t.dob.age>20&&t.dob.age<57})),a=t.filter((function(t){return t.dob.age>56})),n=t.filter((function(t){return t.dob.age<21}));return[].concat(e,a,n)},E=function(t){return Object(f.a)(t).sort((function(t,e){return t.location.city>e.location.city||t.location.city===e.location.city&&t.location.state>e.location.state?1:-1}))},k=a(22),w=a.n(k),O=function(){return r.a.createElement("div",{className:"".concat(w.a.loading__skeleton)})},I=a(1),N=a.n(I),B=function(t){var e;return t.userData?(e=t.userData.dob.age<21?"".concat(N.a.bg__red):t.userData.dob.age>20&&t.userData.dob.age<57?"".concat(N.a.bg__green):"".concat(N.a.bg__blue),r.a.createElement("div",{className:"".concat(N.a.card__container)},r.a.createElement("div",{className:"".concat(N.a.card__item," ").concat(e)},r.a.createElement("figure",null,r.a.createElement("img",{src:t.userData.picture.large,alt:"".concat(t.userData.name.first," ").concat(t.userData.name.last)})),r.a.createElement("div",{className:"".concat(N.a.card__desc)},r.a.createElement("h6",null,r.a.createElement("div",null,"".concat(t.userData.name.title,". ").concat(t.userData.name.first," ").concat(t.userData.name.last)),r.a.createElement("div",null,t.userData.dob.age)),r.a.createElement("address",null,r.a.createElement("div",null,"".concat(t.userData.location.city,", ").concat(t.userData.location.state,", ").concat(t.userData.location.postcode))),r.a.createElement("div",{className:"".concat(N.a.card__email)},t.userData.email))))):r.a.createElement("div",{className:"".concat(N.a.card__container)},r.a.createElement("div",{className:"".concat(N.a.card__item)},r.a.createElement("figure",null,r.a.createElement(O,null)),r.a.createElement("div",{className:"".concat(N.a.card__desc)},r.a.createElement("h6",null,r.a.createElement("div",null,r.a.createElement(O,null)),r.a.createElement("div",null,r.a.createElement(O,null))),r.a.createElement("address",null,r.a.createElement(O,null)),r.a.createElement("div",{className:"".concat(N.a.card__email)},r.a.createElement(O,null)))))},j=function(t){Object(c.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).componentDidMount=function(){var t=localStorage.getItem("isLoaded");window.addEventListener("resize",n.updateDimensions.bind(Object(b.a)(n))),t?n.setState({isLoading:!1,scrolledCount:localStorage.getItem("scrolledCount"),originalData:JSON.parse(localStorage.getItem("originalData")),chunkedData:JSON.parse(localStorage.getItem("chunkedData"))},(function(){this.setState({sortedDataByColor:JSON.parse(localStorage.getItem("sortedDataByColor")),sortedDataByCity:JSON.parse(localStorage.getItem("sortedDataByCity")),newChunkedData:JSON.parse(localStorage.getItem("newChunkedData"))})})):D.a.get("https://randomuser.me/api/?results=100").then((function(t){localStorage.setItem("isLoaded",!0),localStorage.setItem("originalData",JSON.stringify(t.data.results)),localStorage.setItem("chunkedData",JSON.stringify(y(t.data.results,10))),n.setState({originalData:t.data.results,chunkedData:y(t.data.results,10),isLoading:!1},(function(){localStorage.setItem("sortedDataByColor",JSON.stringify(v(this.state.chunkedData[0]))),localStorage.setItem("sortedDataByCity",JSON.stringify(v(this.state.chunkedData[0]))),localStorage.setItem("newChunkedData",JSON.stringify(this.state.chunkedData[0])),this.setState({sortedDataByColor:v(this.state.chunkedData[0]),sortedDataByCity:E(this.state.chunkedData[0]),newChunkedData:this.state.chunkedData[0]})}))})).catch((function(t){n.setState({errorMessage:t,isLoading:!1})}))},n.handleScroll=function(t){var e=n.cardContainerRef,a=n.state.windowWidth,r=e.current.scrollLeft,o=e.current.scrollWidth,i=+parseFloat(e.current.scrollTop).toFixed(),s=+parseFloat(e.current.scrollHeight).toFixed(),l=+parseFloat(e.current.clientHeight).toFixed();a>640?o-r===a&&n.setState({getMoreUsers:!0},(function(){var e=localStorage.getItem("scrolledCount");(e?e<this.state.scrolledCountMax:this.state.scrolledCount<this.state.scrolledCountMax)&&setTimeout(function(){localStorage.setItem("scrolledCount",parseInt(t)+1),this.setState({scrolledCount:parseInt(t)+1,getMoreUsers:!1},(function(){var t=Object(f.a)(this.state.newChunkedData).concat(this.state.chunkedData[this.state.scrolledCount]);localStorage.setItem("newChunkedData",JSON.stringify(t)),localStorage.setItem("sortedDataByColor",JSON.stringify(v(t))),localStorage.setItem("sortedDataByCity",JSON.stringify(E(t))),this.setState({newChunkedData:t,sortedDataByColor:v(t),sortedDataByCity:E(t)})}))}.bind(this),500)})):s-i===l&&n.setState({getMoreUsers:!0},(function(){var e=localStorage.getItem("scrolledCount");(e?e<this.state.scrolledCountMax:this.state.scrolledCount<this.state.scrolledCountMax)&&setTimeout(function(){localStorage.setItem("scrolledCount",parseInt(t)+1),this.setState({scrolledCount:parseInt(t)+1,getMoreUsers:!1},(function(){var t=Object(f.a)(this.state.newChunkedData).concat(this.state.chunkedData[this.state.scrolledCount]);localStorage.setItem("newChunkedData",JSON.stringify(t)),localStorage.setItem("sortedDataByColor",JSON.stringify(v(t))),localStorage.setItem("sortedDataByCity",JSON.stringify(E(t))),this.setState({newChunkedData:t,sortedDataByColor:v(t),sortedDataByCity:E(t)})}))}.bind(this),500)}))},n.cardContainerRef=r.a.createRef(),n.state={originalData:[],chunkedData:[],newChunkedData:[],sortedDataByColor:[],sortedDataByCity:[],isLoading:!0,errorMessage:null,scrolledCount:0,scrolledCountMax:9,windowWidth:window.innerWidth,windowHeight:window.innerHeight,getMoreUsers:!1},n}return Object(l.a)(a,[{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions.bind(this))}},{key:"updateDimensions",value:function(){this.setState({windowWidth:window.innerWidth})}},{key:"renderContent",value:function(){var t=this.props.isColorSelected,e=this.props.isCitiesSelected,a=[];return!1===t?(a=this.state.newChunkedData,e&&(a=this.state.sortedDataByCity)):!0===t?(a=this.state.sortedDataByColor,!0===e&&(a=this.state.sortedDataByCity)):a=this.state.newChunkedData,r.a.createElement(r.a.Fragment,null,this.state.isLoading?Object(f.a)(new Array(5)).map((function(t,e){return r.a.createElement(B,{key:e})})):a.map((function(t,e){return r.a.createElement(B,{key:e,userData:t})})))}},{key:"render",value:function(){var t,e=this;return this.state.windowWidth<641&&(t=this.state.windowHeight-120),r.a.createElement("section",{ref:this.cardContainerRef,className:"".concat(N.a.container),onScroll:function(){return e.handleScroll(e.state.scrolledCount)},style:{height:t}},this.renderContent(),this.state.getMoreUsers&&this.state.scrolledCount<9?r.a.createElement("div",{className:"".concat(N.a.notice)},"Loading more data.."):null)}}]),a}(n.Component),U=function(t){Object(c.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(s.a)(this,a),(n=e.call(this,t)).handleColorStateChange=function(t){n.setState({isColorSelected:t})},n.handleCitiesStateChange=function(t){n.setState({isCitiesSelected:t})},n.state={isColorSelected:null,isCitiesSelected:null},n}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(C,null,r.a.createElement(S,{filterColorState:this.handleColorStateChange,filterCitiesState:this.handleCitiesStateChange}),r.a.createElement(j,{isColorSelected:this.state.isColorSelected,isCitiesSelected:this.state.isCitiesSelected}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(45);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},7:function(t,e,a){t.exports={navigation__container:"Header_navigation__container__1troj",navigation__item:"Header_navigation__item__3Usg1",navigation__item_active:"Header_navigation__item_active__uLOQh"}}},[[23,1,2]]]);
//# sourceMappingURL=main.fe33bc87.chunk.js.map